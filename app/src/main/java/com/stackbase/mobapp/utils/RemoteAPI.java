package com.stackbase.mobapp.utils;import android.content.SharedPreferences;import android.preference.PreferenceManager;import android.util.Log;import com.stackbase.mobapp.ApplicationContextProvider;import com.stackbase.mobapp.objects.Borrower;import java.io.File;import java.io.IOException;import java.util.ArrayList;import java.util.HashMap;import java.util.List;import java.util.Map;public class RemoteAPI {    private String apiEndpoint;    private String token;    private static final String TAG = RemoteAPI.class.getName();    public RemoteAPI() {        SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(ApplicationContextProvider.getContext());        apiEndpoint = prefs.getString(Constant.KEY_REMOTE_API_ENDPOINT, Constant.DEFAULT_API_ENDPOINT);        token = prefs.getString(Constant.KEY_REMOTE_ACCESS_TOKEN, "");    }    public String uploadUserDatum(File jpg, int datumId, int borrowId) throws IOException {        String action = "app/uploadUserDatum.action";        String url = String.format("%s/%s", apiEndpoint, action);        String response = "";        try {            Map<String, String> params = new HashMap<>();            params.put("imageName", jpg.getName());            params.put("datumId", (Integer.valueOf(datumId)).toString());            params.put("borrowId", (Integer.valueOf(borrowId)).toString());            params.put("imgSize", (Long.valueOf(jpg.length())).toString());            params.put("encryptpwd", token);            response = HTTPUtils.post(url, params, null, jpg);        } catch (IOException e) {            Log.e(TAG, "Fail to upload user datum.", e);            throw e;        }        return response;    }    public List<Borrower> listBorrowers() throws IOException {        String action = "app/borrowAllUserInfo.action";        List<Borrower> result = new ArrayList<>();        try {//            Map<String, String> headers = new HashMap<>();//            headers.put("Content-Type", "application/json");//            headers.put("Accept", "application/json");//            String body = "{\"authaa\": {\"tenantName\": \"admin\", \"passwordCredentials\": {\"username\": \"admin\", \"password\": \"1be775ea0ff34d07\"}}}";//            result = HTTPUtils.post("http://158.85.90.245:5000/v2.0/tokens", body, headers);            String url = String.format("%s/%s", apiEndpoint, action);            Log.d(TAG, "Access url: " + url);            Map<String, String> params = new HashMap<>();            params.put("encryptpwd", token);            String response = HTTPUtils.postForm(url, params);            // TODO parse the response to Borrower object        } catch (IOException e) {            Log.e(TAG, "Fail to list borrowers.", e);            throw e;        }        return result;    }}